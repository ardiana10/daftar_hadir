<script>
  const form = document.getElementById('attendance-form');
  const canvas = document.getElementById('signature-pad');
  const signaturePad = new SignaturePad(canvas);

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    if (signaturePad.isEmpty()) {
      alert('Silakan tanda tangani dulu!');
      return;
    }

    const data = {
      name: document.getElementById('name').value,
      signature: signaturePad.toDataURL()
    };

    const url = 'https://script.google.com/macros/s/AKfycbxYz1-zRoXeBLE5UUUhVb2VdU0YbIFwfuGlGa-8rJgWhdiCvqINvEQHyqxt-Lmz8YC4/exec';

    const response = await fetch(url, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    });

    if (response.ok) {
      alert('Data berhasil dikirim!');
      form.reset();
      signaturePad.clear();
    } else {
      alert('Gagal mengirim data.');
    }
  });
</script>
